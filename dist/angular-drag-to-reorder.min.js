/*
  angular-drag-to-reorder v0.0.2
  http://brandly.github.io/angular-drag-to-reorder/
*/
(function(){angular.module("mb-dragToReorder",[]).directive("dragToReorder",[function(){return{scope:{dragToReorder:"="},link:function(e,r,a){var n,t,o,d,s,i,l;return l=a.dragHandle?angular.element(r[0].getElementsByClassName(a.dragHandle)):r,t="dragging",l.attr("draggable",!0),l.on("dragstart",function(a){return a.dataTransfer.setDragImage(r[0],0,0),r.addClass(t),e.$apply(function(){return e.$emit("dragToReorder.dragstart",{item:e.dragToReorder[e.$parent.$index],from:e.$parent.$index})}),a.dataTransfer.setData("text/plain",e.$parent.$index)}),l.on("dragend",function(){return e.$apply(function(){return e.$emit("dragToReorder.dragend")}),r.removeClass(t)}),i="dropping",d="dropping-above",s="dropping-below",n=function(e){var a,n;return e=e||window.event,e.preventDefault(),n=e.pageY,a=this.offsetTop-this.scrollTop+this.clientTop,n<a+this.offsetHeight/2?(r.removeClass(s),r.addClass(d)):(r.removeClass(d),r.addClass(s))},o=function(a){var n,t,l;return a.preventDefault(),n=parseInt(a.dataTransfer.getData("text/plain"),10),l=null,l=r.hasClass(d)?n<e.$parent.$index?e.$parent.$index-1:e.$parent.$index:n<e.$parent.$index?e.$parent.$index:e.$parent.$index+1,t=e.dragToReorder[n],e.dragToReorder.splice(n,1),e.dragToReorder.splice(l,0,t),e.$apply(function(){return e.$emit("dragToReorder.reordered",{item:t,from:n,to:l})}),r.removeClass(i),r.removeClass(d),r.removeClass(s),r.off("drop",o)},r.on("dragenter",function(e){return r.hasClass(t)?void 0:(r.addClass(i),r.on("dragover",n),r.on("drop",o))}),r.on("dragleave",function(e){return r.removeClass(i),r.removeClass(d),r.removeClass(s),r.off("dragover",n),r.off("drop",o)})}}}])}).call(this);